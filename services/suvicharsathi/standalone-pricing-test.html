<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Standalone Pricing Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding-top: 50px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>üß™ Standalone Pricing Test</h2>
        
        <div class="alert alert-info">
            <strong>Testing:</strong> This page has NO external dependencies except Bootstrap.
        </div>
        
        <div class="row justify-content-center">
            <!-- Monthly Plan -->
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body text-center">
                        <h3>üåü Monthly Plan</h3>
                        <div class="display-4 text-primary">‚Çπ49</div>
                        <p class="text-muted">per month</p>
                        
                        <button class="btn btn-primary btn-lg w-100 subscribe-btn" 
                                data-plan="monthly" 
                                data-amount="49" 
                                data-duration="monthly">
                            Subscribe Monthly
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Yearly Plan -->
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body text-center">
                        <h3>üèÜ Yearly Plan</h3>
                        <div class="display-4 text-success">‚Çπ499</div>
                        <p class="text-muted">per year</p>
                        
                        <button class="btn btn-success btn-lg w-100 subscribe-btn" 
                                data-plan="yearly" 
                                data-amount="499" 
                                data-duration="yearly">
                            Subscribe Yearly
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-4">
            <div class="card">
                <div class="card-header">
                    <h5>Test Results</h5>
                </div>
                <div class="card-body">
                    <div id="testResults">
                        <p class="text-muted">Click a button to see results...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('üöÄ Standalone test page loaded');
        
        // Simple APIService mock
        class MockAPIService {
            constructor() {
                console.log('üîß Mock API Service created');
            }
            
            isAuthenticated() {
                // Simulate unauthenticated user
                return false;
            }
            
            async initiatePayment(planId) {
                console.log('üí≥ Mock payment initiation for plan:', planId);
                return {
                    success: true,
                    data: {
                        id: 'mock_order_123',
                        currency: 'INR',
                        order_id: 'mock_order_123'
                    }
                };
            }
        }
        
        // Initialize mock API
        const api = new MockAPIService();
        
        function handleSubscription(event) {
            const button = event.target;
            const plan = button.dataset.plan;
            const amount = button.dataset.amount;
            
            console.log('üéØ Button clicked:', { plan, amount });
            
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = `
                <div class="alert alert-success">
                    <h6>‚úÖ Button Click Successful!</h6>
                    <p><strong>Plan:</strong> ${plan}</p>
                    <p><strong>Amount:</strong> ‚Çπ${amount}</p>
                    <p><strong>Time:</strong> ${new Date().toLocaleTimeString()}</p>
                </div>
            `;
            
            // Test authentication
            if (!api.isAuthenticated()) {
                resultsDiv.innerHTML += `
                    <div class="alert alert-warning">
                        <h6>üîê Authentication Required</h6>
                        <p>User needs to login or register first.</p>
                        <button class="btn btn-primary btn-sm" onclick="simulateLogin()">Simulate Login</button>
                    </div>
                `;
            } else {
                resultsDiv.innerHTML += `
                    <div class="alert alert-info">
                        <h6>üí≥ Initiating Payment...</h6>
                        <p>Proceeding with payment for ${plan} plan.</p>
                    </div>
                `;
                
                // Test payment initiation
                testPayment(plan);
            }
        }
        
        async function testPayment(plan) {
            try {
                const result = await api.initiatePayment(plan);
                const resultsDiv = document.getElementById('testResults');
                
                if (result.success) {
                    resultsDiv.innerHTML += `
                        <div class="alert alert-success">
                            <h6>‚úÖ Payment API Success</h6>
                            <pre>${JSON.stringify(result.data, null, 2)}</pre>
                        </div>
                    `;
                } else {
                    resultsDiv.innerHTML += `
                        <div class="alert alert-danger">
                            <h6>‚ùå Payment API Failed</h6>
                            <p>${result.error}</p>
                        </div>
                    `;
                }
            } catch (error) {
                const resultsDiv = document.getElementById('testResults');
                resultsDiv.innerHTML += `
                    <div class="alert alert-danger">
                        <h6>‚ùå Payment Error</h6>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }
        
        function simulateLogin() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML += `
                <div class="alert alert-info">
                    <h6>üîÑ Simulating Login...</h6>
                    <p>In real app, this would redirect to login/register page.</p>
                </div>
            `;
        }
        
        // Setup event listeners when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM loaded for standalone test');
            
            const buttons = document.querySelectorAll('.subscribe-btn');
            console.log('üîç Found buttons:', buttons.length);
            
            buttons.forEach((button, index) => {
                console.log(`‚öôÔ∏è Setting up button ${index}:`, button.dataset.plan);
                button.addEventListener('click', handleSubscription);
            });
            
            console.log('‚úÖ Standalone test setup complete');
        });
    </script>
</body>
</html>
