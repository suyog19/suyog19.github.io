<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - ‡§∏‡•Å‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§∏‡§æ‡§•‡•Ä</title>
    <link rel="icon" type="image/png" href="assets/images/logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
  <div id="shared-header"></div>

  <div class="container my-5" style="margin-top: 120px !important;">
    
    <!-- Welcome Section -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="card bg-primary text-white">
          <div class="card-body">
            <h2>Welcome, <span id="userName">User</span>! üôè</h2>
            <p class="mb-0">Your daily dose of inspiration awaits!</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="row mb-4">
      <div class="col-md-4 mb-3">
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">üì± WhatsApp</h5>
            <p class="card-text" id="userPhone">+91 XXXXXXXXXX</p>
            <small class="text-muted">Delivery Number</small>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">üìÖ Subscription</h5>
            <p class="card-text" id="subscriptionStatus">No Active Plan</p>
            <small class="text-muted" id="subscriptionDetails">Choose a plan to start</small>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">üåü ‡§∏‡•Å‡§µ‡§ø‡§ö‡§æ‡§∞</h5>
            <p class="card-text" id="totalMessages">0</p>
            <small class="text-muted">Messages Received</small>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- Subscription Management -->
      <div class="col-md-8">
        <div class="card">
          <div class="card-header">
            <h5>üìã Subscription Management</h5>
          </div>
          <div class="card-body">
            <div id="noSubscription" style="display: none;">
              <div class="text-center py-4">
                <h6>No Active Subscription</h6>
                <p class="text-muted">Start receiving daily Marathi ‡§∏‡•Å‡§µ‡§ø‡§ö‡§æ‡§∞ by choosing a plan</p>
                <a href="pricing.html" class="btn btn-primary">Choose Plan</a>
              </div>
            </div>
            
            <div id="activeSubscription" style="display: none;">
              <div class="d-flex justify-content-between align-items-start mb-3">
                <div>
                  <h6 id="planName">Monthly Plan</h6>
                  <p class="text-muted mb-1">
                    Started: <span id="planStartDate">-</span><br>
                    Expires: <span id="planEndDate">-</span>
                  </p>
                  <span class="badge bg-success" id="planStatus">Active</span>
                </div>
                <div class="text-end">
                  <h5 id="planPrice">‚Çπ49</h5>
                  <small class="text-muted" id="planInterval">per month</small>
                </div>
              </div>
              
              <div class="progress mb-3" style="height: 10px;">
                <div class="progress-bar" id="subscriptionProgress" role="progressbar" style="width: 0%"></div>
              </div>
              
              <div class="d-flex gap-2">
                <button class="btn btn-outline-primary btn-sm" id="renewPlanBtn">Renew Plan</button>
                <button class="btn btn-outline-secondary btn-sm" id="changePlanBtn">Change Plan</button>
                <button class="btn btn-outline-danger btn-sm" id="cancelPlanBtn">Cancel</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Messages -->
        <div class="card mt-4">
          <div class="card-header">
            <h5>üìú Recent ‡§∏‡•Å‡§µ‡§ø‡§ö‡§æ‡§∞</h5>
          </div>
          <div class="card-body">
            <div id="recentMessages">
              <div class="text-center py-3">
                <p class="text-muted">No messages yet. Subscribe to start receiving daily ‡§∏‡•Å‡§µ‡§ø‡§ö‡§æ‡§∞!</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Account Settings -->
      <div class="col-md-4">
        <div class="card">
          <div class="card-header">
            <h5>‚öôÔ∏è Account Settings</h5>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <label class="form-label">Full Name</label>
              <input type="text" class="form-control" id="editUserName" readonly>
              <button class="btn btn-sm btn-outline-primary mt-1" id="editNameBtn">Edit</button>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" id="editUserEmail" readonly>
              <button class="btn btn-sm btn-outline-primary mt-1" id="editEmailBtn">Edit</button>
            </div>
            
            <div class="mb-3">
              <label class="form-label">WhatsApp Number</label>
              <input type="text" class="form-control" id="editUserPhone" readonly>
              <small class="text-muted">Contact support to change phone number</small>
            </div>
            
            <hr>
            
            <div class="d-grid gap-2">
              <button class="btn btn-outline-secondary btn-sm" id="downloadDataBtn">Download My Data</button>
              <button class="btn btn-outline-danger btn-sm" id="deleteAccountBtn">Delete Account</button>
              <button class="btn btn-secondary btn-sm" id="logoutBtn">Logout</button>
            </div>
          </div>
        </div>

        <!-- Support -->
        <div class="card mt-4">
          <div class="card-header">
            <h5>üí¨ Support</h5>
          </div>
          <div class="card-body">
            <p class="small text-muted">Need help? We're here for you!</p>
            <div class="d-grid gap-2">
              <a href="mailto:contact@suyogjoshi.com" class="btn btn-outline-primary btn-sm">üìß Email Support</a>
              <a href="https://wa.me/918975643292" class="btn btn-outline-success btn-sm" target="_blank">üí¨ WhatsApp</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="shared-footer"></div>
  
  <!-- Alert Container -->
  <div id="alertContainer" class="position-fixed top-0 start-50 translate-middle-x" style="z-index: 9999; margin-top: 100px;"></div>

  <!-- Modals -->
  <!-- Edit Name Modal -->
  <div class="modal fade" id="editNameModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Edit Name</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="editNameForm">
            <div class="mb-3">
              <label for="newUserName" class="form-label">Full Name</label>
              <input type="text" class="form-control" id="newUserName" required>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="saveNameBtn">Save Changes</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Email Modal -->
  <div class="modal fade" id="editEmailModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Edit Email</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="editEmailForm">
            <div class="mb-3">
              <label for="newUserEmail" class="form-label">Email Address</label>
              <input type="email" class="form-control" id="newUserEmail">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="saveEmailBtn">Save Changes</button>
        </div>
      </div>
    </div>
  </div>

  <script src="assets/js/shared.js"></script>
  <script src="assets/js/api.js"></script>
  <script src="assets/js/dashboard.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
